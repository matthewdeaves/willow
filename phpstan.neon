includes:
    - vendor/cakedc/cakephp-phpstan/extension.neon

parameters:
    level: 5
    treatPhpDocTypesAsCertain: false
    bootstrapFiles:
        - config/bootstrap.php
    paths:
        - src/
    parallel:
        maximumNumberOfProcesses: 1
    ignoreErrors:
        # CakePHP Table::get() accepts named arguments via variadic ...$args
        - identifier: argument.unknown
          path: src/Controller/Admin/ArticlesController.php
        # Google Cloud Translate classes are external and may not be fully typed
        - identifier: class.notFound
          path: src/Service/Api/Google/GoogleApiService.php
        # CakePHP baked controllers have PHPDoc @return with void|null but native type is Response|null
        # This is a known CakePHP bake template issue, not a real code bug
        - identifier: return.phpDocType
          path: src/Controller/Admin/*
        - identifier: phpDoc.parseError
          path: src/Controller/Admin/*
        # CakePHP queue jobs use TableRegistry::get() which returns Table, but access entity properties dynamically
        - identifier: property.notFound
          path: src/Job/*
        - identifier: method.notFound
          path: src/Job/*
        # CakePHP behaviors use dynamic entity/table access
        - identifier: property.notFound
          path: src/Model/Behavior/*
        - identifier: method.notFound
          path: src/Model/Behavior/*
        # CakePHP tables have dynamic access patterns
        - identifier: property.notFound
          path: src/Model/Table/*
        - identifier: method.notFound
          path: src/Model/Table/*
        # CakePHP middleware uses dynamic request/response patterns
        - identifier: method.notFound
          path: src/Middleware/*
        - identifier: argument.type
          path: src/Middleware/*
        # Unused method detection - some methods are used dynamically or as callbacks
        - identifier: method.unused
          path: src/*
        # Return type issues in controllers
        - identifier: return.phpDocType
          path: src/Controller/*
        # Argument type issues in jobs (using Table as generic type)
        - identifier: argument.type
          path: src/Job/*
        # PHPDoc type annotation differences
        - identifier: parameter.phpDocType
          path: src/Job/*
        - identifier: property.phpDocType
          path: src/Job/*
        # Never-returning methods (handleEmptySeoFields pattern)
        - identifier: return.unusedType
          path: src/Job/*
        # Unknown class annotations in behaviors
        - identifier: class.notFound
          path: src/Model/Behavior/*
        # Unused constants (may be used for configuration purposes)
        - identifier: classConstant.unused
          path: src/Job/*
        # Null coalesce expression issues
        - identifier: nullCoalesce.expr
          path: src/Middleware/*
        # Return type differences (interface vs concrete class)
        - identifier: return.type
          path: src/Model/Behavior/*
        - identifier: return.unusedType
          path: src/Middleware/*
    excludePaths:
        # Console Installer has CakePHP's own error suppression
        - src/Console/Installer.php
